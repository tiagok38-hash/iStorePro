import{j as e,X as d,f as a}from"./index-BMA--0RW.js";const r=t=>new Date(t).toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"}),x=({items:t})=>e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-left text-muted bg-surface-secondary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2",children:"Produto"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Qtd"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Custo Unit."}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Custo Total"})]})}),e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{className:"border-b border-border",children:[e.jsxs("td",{className:"px-3 py-2 font-medium text-primary",children:[e.jsxs("p",{children:[s.productDetails.brand," ",s.productDetails.model," ",s.productDetails.color]}),e.jsxs("div",{className:"text-xs text-muted mt-1",children:[s.productDetails.condition," / ",s.productDetails.warranty]}),e.jsxs("div",{className:"text-xs text-muted mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[s.productDetails.imei1&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"IMEI 1:"})," ",s.productDetails.imei1]}),s.productDetails.imei2&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"IMEI 2:"})," ",s.productDetails.imei2]}),s.productDetails.serialNumber&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"S/N:"})," ",s.productDetails.serialNumber]}),s.productDetails.batteryHealth!==void 0&&s.productDetails.batteryHealth>0&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Bateria:"})," ",s.productDetails.batteryHealth,"%"]})]})]}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.quantity}),e.jsx("td",{className:"px-3 py-2 text-right",children:a(s.finalUnitCost)}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:a(s.finalUnitCost*s.quantity)})]},s.id))})]}),c=({products:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-left text-xs text-muted bg-surface-secondary uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 font-medium",children:"Descrição"}),e.jsx("th",{className:"px-3 py-2 font-medium text-center",children:"Qtd"}),e.jsx("th",{className:"px-3 py-2 font-medium text-right",children:"Custo Unit."}),e.jsx("th",{className:"px-3 py-2 font-medium text-right",children:"Custo Adic."}),e.jsx("th",{className:"px-3 py-2 font-medium text-right",children:"Custo Total Unit."}),e.jsx("th",{className:"px-3 py-2 font-medium text-right",children:"Preço Venda"})]})}),e.jsx("tbody",{children:t.map(s=>{const l=(s.costPrice||0)+(s.additionalCostPrice||0),i=s.variations?.map(n=>`${n.gradeName}: ${n.valueName}`).join(", ");return e.jsxs("tr",{className:"border-b border-border",children:[e.jsxs("td",{className:"px-3 py-2 font-medium text-primary align-top",children:[e.jsxs("p",{children:[s.brand," ",s.model," ",s.color]}),e.jsxs("div",{className:"text-xs text-muted font-normal mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[s.imei1&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"IMEI 1:"})," ",s.imei1]}),s.imei2&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"IMEI 2:"})," ",s.imei2]}),s.serialNumber&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"S/N:"})," ",s.serialNumber]}),s.batteryHealth>0&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Bateria:"})," ",s.batteryHealth,"%"]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Local:"})," ",s.storageLocation||"N/A"]}),i&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Variações:"})," ",i]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Condição:"})," ",s.condition]})]})]}),e.jsx("td",{className:"px-3 py-2 text-center align-top",children:"1"}),e.jsx("td",{className:"px-3 py-2 text-right align-top",children:a(s.costPrice)}),e.jsx("td",{className:"px-3 py-2 text-right align-top",children:a(s.additionalCostPrice)}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold align-top",children:a(l)}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold text-primary align-top",children:a(s.price)})]},s.id)})})]}),e.jsxs("div",{className:"text-right mt-2 text-sm font-semibold pr-3",children:["Total de Itens na Compra: ",t.length]})]}),m=({purchase:t,onClose:s,associatedProducts:l=[]})=>(t.supplierId.split("-")[1]||t.supplierId,e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-surface rounded-lg shadow-xl p-6 w-full max-w-6xl mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 pb-4 border-b border-border",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary",children:["Detalhes da Compra #",t.displayId]}),e.jsxs("p",{className:"text-muted text-sm",children:["Fornecedor: ",t.supplierName]}),e.jsxs("p",{className:"text-muted text-sm mt-1",children:["Lançado por: ",e.jsx("span",{className:"font-semibold",children:t.createdBy==="Admin User"?"Keiler":t.createdBy})," em ",r(t.createdAt)]})]}),e.jsx("button",{onClick:s,className:"p-1 text-muted hover:text-danger",children:e.jsx(d,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:(t.stockStatus==="Lançado"||t.stockStatus==="Parcialmente Lançado")&&l.length>0?e.jsx(c,{products:l}):t.items.length>0?e.jsx(x,{items:t.items}):e.jsx("div",{className:"text-center text-muted py-8",children:"Nenhum item nesta compra."})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex justify-end gap-8 text-right",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted",children:"Subtotal"}),e.jsx("p",{className:"font-semibold",children:a(t.total-t.additionalCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted",children:"Custo Adicional"}),e.jsx("p",{className:"font-semibold",children:a(t.additionalCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted",children:"Total da Compra"}),e.jsx("p",{className:"font-bold text-xl text-primary",children:a(t.total)})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Fechar"})})]})}));export{m as P};
