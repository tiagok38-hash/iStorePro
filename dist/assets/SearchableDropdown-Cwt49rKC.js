import{j as t,h as j,X as N}from"./index-BMA--0RW.js";import{r}from"./react-vendor-Bv8thS0I.js";const S=({options:a,value:n,onChange:d,placeholder:h="Buscar..."})=>{const[s,l]=r.useState(""),[f,c]=r.useState(!1),o=r.useRef(null),i=r.useRef(null),u=r.useMemo(()=>a.find(e=>e.value===n),[a,n]),x=f&&s.trim().length>0,m=r.useMemo(()=>s.trim()?a.filter(e=>(e.label||"").toLowerCase().includes(s.toLowerCase())):[],[a,s]);r.useEffect(()=>{const e=g=>{o.current&&!o.current.contains(g.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const p=e=>{d(e),l(""),c(!1)},b=e=>{e.stopPropagation(),d(null),l(""),i.current?.focus()},v=e=>{l(e.target.value)},w=()=>{c(!0)};return t.jsxs("div",{className:"relative w-full",ref:o,children:[t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-muted pointer-events-none",children:t.jsx(j,{className:"w-4 h-4"})}),t.jsx("input",{ref:i,type:"text",placeholder:u?u.label:h,value:s,onChange:v,onFocus:w,className:`w-full p-2 pl-9 pr-8 border rounded bg-surface border-border focus:ring-accent focus:border-accent text-sm h-10 ${u&&!s?"placeholder:text-primary":""}`}),(n||s)&&t.jsx("button",{type:"button",onClick:b,className:"absolute inset-y-0 right-0 flex items-center pr-2",children:t.jsx(N,{className:"h-4 w-4 text-muted hover:text-primary"})})]}),x&&t.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-surface border border-border rounded-md shadow-lg max-h-48 overflow-y-auto",children:t.jsx("ul",{children:m.length>0?m.map(e=>t.jsx("li",{className:`p-2.5 text-sm cursor-pointer hover:bg-surface-secondary ${n===e.value?"bg-accent-light text-accent":"text-primary"}`,onClick:()=>p(e.value),children:e.label},e.value)):t.jsx("li",{className:"p-2.5 text-sm text-center text-muted",children:"Nenhum resultado encontrado."})})})]})};export{S};
