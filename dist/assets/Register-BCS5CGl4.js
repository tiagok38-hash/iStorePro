import{i as y,u as v,j as e,S as N}from"./index-BMA--0RW.js";import{r as t,u as w,d as C,L as S}from"./react-vendor-Bv8thS0I.js";import"./supabase-C1Qlw3jS.js";const q=()=>{const[o,x]=t.useState(""),[l,p]=t.useState(""),[r,h]=t.useState(""),[m,f]=t.useState(""),[c,d]=t.useState(!1),{register:b,isAuthenticated:u}=y(),n=w(),{showToast:i}=v();C.useEffect(()=>{u&&n("/")},[u,n]);const g=async s=>{if(s.preventDefault(),r!==m){i("As senhas não coincidem.","error");return}d(!0);try{await b(o,l,r),i("Cadastro realizado com sucesso!","success"),n("/")}catch(j){i(j.message||"Falha no cadastro.","error")}finally{d(!1)}},a="w-full px-4 py-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-accent focus:border-transparent transition";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-primary",children:"Crie sua conta de Admin"}),e.jsxs("p",{className:"text-sm text-center text-muted mt-1",children:["Já possui uma conta?"," ",e.jsx(S,{to:"/login",className:"font-medium text-accent hover:underline",children:"Faça o login"})]})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-primary mb-1",children:"Nome Completo"}),e.jsx("input",{id:"name",type:"text",value:o,onChange:s=>x(s.target.value),className:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-primary mb-1",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:l,onChange:s=>p(s.target.value),className:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password-register",className:"block text-sm font-medium text-primary mb-1",children:"Senha"}),e.jsx("input",{id:"password-register",type:"password",value:r,onChange:s=>h(s.target.value),className:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-primary mb-1",children:"Confirme a Senha"}),e.jsx("input",{id:"confirm-password",type:"password",value:m,onChange:s=>f(s.target.value),className:a,required:!0})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full px-4 py-2.5 bg-primary text-on-primary rounded-md font-semibold hover:bg-opacity-90 transition disabled:bg-muted flex items-center justify-center",children:c?e.jsx(N,{className:"h-5 w-5"}):"Cadastrar"})]})]})};export{q as default};
