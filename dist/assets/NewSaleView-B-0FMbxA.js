import{c as Ee,j as e,aG as Ie,a1 as Ue,f as g,ag as qe,u as Be,i as Ge,bl as Qe,bp as _e,bq as Je,O as We,br as Xe,A as Ke,a_ as Ye,bs as Ze,ah as Ae,bt as es,z as ss,P as ts,w as as,h as rs,X as ls,ak as ns,F as os}from"./index-BMA--0RW.js";import{r as a,d as ze}from"./react-vendor-Bv8thS0I.js";import{S as ds}from"./SearchableDropdown-Cwt49rKC.js";import{C as Le}from"./CurrencyInput-DaWIS5Fg.js";import{C as cs}from"./CustomerModal-Cs-UW485.js";import is from"./ProductModal-D-J2CwZs.js";const xs=()=>`pay-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,us=({isOpen:P,onClose:C,onConfirm:T,amountDue:M,initialTransactionType:$,initialMethodId:O})=>{const[W,B]=a.useState([]),[G,x]=a.useState(O||""),[f,Q]=a.useState($||"credit"),[i,v]=a.useState(M),[w,_]=a.useState("withInterest"),[N,q]=a.useState(1);a.useEffect(()=>{P&&(Q($||"credit"),x(O||""),Ee().then(c=>{const u=c.filter(m=>(m.type==="card"||m.name.toLowerCase().includes("cartão"))&&m.active!==!1&&!m.name.toLowerCase().includes("pagseguro"));B(u),u.length>0&&!O&&x(u[0].id)}),v(M>0?M:0),_("withInterest"),q(1))},[P,M,$,O]),a.useEffect(()=>{},[f]);const h=a.useMemo(()=>W.find(c=>c.id===G),[W,G]),y=h?.config,n=a.useMemo(()=>{if(!y||i<=0)return null;const c=i;let u=null;if(f==="debit"){const m=y.debitRate,b=c/(1-m/100),j=b-c;u={type:"debit",totalToPay:b,feeValue:j,feePercent:m,originalValue:c,installments:1,installmentValue:b}}else{const j=((w==="noInterest"?y.creditNoInterestRates:y.creditWithInterestRates).find(I=>I.installments===N)||{rate:0}).rate;if(w==="noInterest"){const I=c*(j/100);u={type:"creditNoInterest",totalToPay:c,feeValue:I,feePercent:j,originalValue:c,installments:N,installmentValue:c/N}}else{const I=c/(1-j/100),K=I-c;u={type:"creditWithInterest",totalToPay:I,feeValue:K,feePercent:j,originalValue:c,installments:N,installmentValue:I/N}}}return u},[y,f,w,i,N]),X=()=>{if(!n||!h)return;const c=f==="debit"?"Débito":"Crédito";let u="",m=0,b=0;f==="debit"?(u="Débito",m=n.feeValue,b=n.totalToPay):w==="withInterest"?(u="Com Juros",m=n.feeValue,b=n.totalToPay):(u="Sem Juros",m=0,b=n.originalValue);const j={id:xs(),method:c,type:u,card:`${h.name} - ${u}`,value:b,installments:n.installments,installmentsValue:n.installmentValue,feePercentage:n.feePercent,fees:n.feeValue};T({payment:j,feeToAddToSale:m})};return P?e.jsx("div",{className:"fixed inset-0 bg-white z-[100] flex flex-col font-sans animate-fade-in",children:e.jsxs("div",{className:"flex-1 flex flex-col w-full h-full max-w-3xl mx-auto overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 bg-gray-50/80 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-xl text-primary transform -rotate-3",children:e.jsx(Ie,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black text-gray-800 tracking-tight",children:"Pagamento com Cartão"}),e.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest",children:"Configuração de taxas e parcelas"})]})]}),e.jsx("button",{onClick:C,className:"p-2 bg-gray-100 text-gray-400 hover:bg-red-50 hover:text-red-500 rounded-xl transition-all shadow-sm group",children:e.jsx(Ue,{className:"h-5 w-5 group-hover:scale-110 transition-transform"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto space-y-4 flex-1 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:"Tipo de Transação"}),e.jsxs("div",{className:"flex p-1 bg-gray-100 rounded-xl border border-gray-200 shadow-inner",children:[e.jsx("button",{onClick:()=>Q("credit"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-black transition-all uppercase tracking-tighter ${f==="credit"?"bg-white shadow-md text-primary":"text-gray-400 hover:text-gray-600"}`,children:"Crédito"}),e.jsx("button",{onClick:()=>Q("debit"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-black transition-all uppercase tracking-tighter ${f==="debit"?"bg-white shadow-md text-primary":"text-gray-400 hover:text-gray-600"}`,children:"Débito"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:"Selecione o Cartão"}),e.jsxs("select",{value:G,onChange:c=>x(c.target.value),className:"w-full p-2 bg-white border border-gray-200 rounded-xl text-xs font-bold text-gray-700 focus:ring-4 focus:ring-primary/5 focus:border-primary outline-none transition-all shadow-sm appearance-none h-[40px]",children:[W.length===0&&e.jsx("option",{value:"",children:"Nenhum cartão configurado"}),W.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-200/50 space-y-3 shadow-inner",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[e.jsxs("div",{className:"md:w-1/2 space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:"Valor da Venda"}),e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-black text-sm group-focus-within:text-primary transition-colors",children:"R$"}),e.jsx(Le,{value:i,onChange:v,className:"w-full pl-10 pr-3 py-3 bg-white border border-gray-200 rounded-xl font-black text-xl text-gray-800 focus:ring-4 focus:ring-primary/5 focus:border-primary outline-none transition-all shadow-sm"})]})]}),n&&e.jsxs("div",{className:"md:w-1/2 flex flex-col justify-between gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-white rounded-xl border border-blue-100 shadow-sm group hover:border-blue-300 transition-all",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest",children:"Total a Cobrar"}),e.jsx("span",{className:"text-lg font-black text-blue-600",children:g(n.totalToPay)})]}),e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-white rounded-xl border border-emerald-100 shadow-sm group hover:border-emerald-300 transition-all",children:[e.jsx("span",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-widest",children:"Liquidez"}),e.jsx("span",{className:"text-lg font-black text-emerald-600",children:g(n.totalToPay-n.feeValue)})]})]})]})}),f==="credit"&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:"Opções de Juros"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_("noInterest"),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-[11px] font-black transition-all border shadow-sm ${w==="noInterest"?"bg-gray-800 border-gray-800 text-white":"bg-white border-gray-200 text-gray-500 hover:border-gray-300"}`,children:"Sem Juros"}),e.jsx("button",{onClick:()=>_("withInterest"),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-[11px] font-black transition-all border shadow-sm ${w==="withInterest"?"bg-primary border-primary text-white":"bg-white border-gray-200 text-gray-500 hover:border-gray-300"}`,children:"Com Juros (Repasse)"})]})]}),e.jsxs("div",{className:`p-3 rounded-xl text-[11px] leading-relaxed flex items-start gap-3 transition-all border ${w==="withInterest"?"bg-amber-50 border-amber-200 text-amber-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[e.jsx("div",{className:`p-1 rounded-full shrink-0 ${w==="withInterest"?"bg-amber-200 text-amber-900":"bg-blue-200 text-blue-900"}`,children:e.jsx("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("p",{className:"font-medium",children:w==="noInterest"?"O cliente paga o valor original. As taxas são descontadas do seu recebimento.":"O valor final é recalculado para que você receba o valor integral, repassando as taxas ao cliente."})]})]}),f==="credit"&&y&&e.jsxs("div",{className:"space-y-2 pb-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:"Escolha o Parcelamento"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:(w==="noInterest"?y.creditNoInterestRates:y.creditWithInterestRates).map(u=>{const m=u.installments,b=w==="withInterest"?i/(1-u.rate/100):i,j=b/m;return e.jsxs("button",{onClick:()=>q(m),className:`group relative p-2 rounded-xl border text-left transition-all hover:shadow-md hover:-translate-y-0.5 ${N===m?"bg-primary border-primary text-white shadow-primary/20":"bg-white border-gray-100 text-gray-700 hover:border-primary/30 shadow-sm"}`,children:[e.jsxs("div",{className:`text-[9px] font-black uppercase mb-0.5 ${N===m?"text-white/80":"text-gray-400"}`,children:[m,"x de"]}),e.jsx("div",{className:"text-sm font-black tracking-tight",children:g(j)}),e.jsxs("div",{className:`text-[7px] font-bold mt-0.5 ${N===m?"text-white/60":"text-gray-400"}`,children:["Total: ",g(b)]}),N===m&&e.jsx("div",{className:"absolute top-1.5 right-1.5",children:e.jsx("div",{className:"w-4 h-4 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(qe,{className:"h-2.5 w-2.5 text-white"})})})]},m)})})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("div",{className:"flex flex-col",children:n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Taxa de Operação:"}),e.jsxs("span",{className:"text-xs font-black text-gray-700",children:[n.feePercent.toFixed(2),"% (",g(n.feeValue),")"]})]})}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsx("button",{onClick:C,className:"flex-1 md:flex-none px-5 py-3 bg-white border-2 border-gray-200 text-gray-500 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-gray-100 hover:border-gray-300 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:X,disabled:!n||!h,className:"flex-1 md:flex-none px-8 py-3 bg-gray-900 text-white rounded-xl font-black text-xs uppercase tracking-widest hover:bg-black hover:shadow-2xl transition-all shadow-lg active:scale-95 disabled:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",children:"Confirmar Pagamento"})]})]})]})}):null},ms=({customers:P,users:C,products:T,suppliers:M,receiptTerms:$,paymentMethods:O,onAddNewCustomer:W,onAddProduct:B,onSaleSaved:G,saleToEdit:x,openCashSessionId:f,openCashSessionDisplayId:Q})=>{const{showToast:i}=Be(),{user:v}=Ge(),w=a.useRef(null),_=a.useRef(!1),[N,q]=a.useState(new Date().toISOString().split("T")[0]),[h,y]=a.useState(null),[n,X]=a.useState(""),[c,u]=a.useState([]),[m,b]=a.useState(""),[j,I]=a.useState(null),[K,de]=a.useState(1),[ce,ie]=a.useState("R$"),[te,xe]=a.useState(0),[ue,me]=a.useState(0),[z,L]=a.useState([]),[he,ae]=a.useState(""),[pe,be]=a.useState(""),[F,ge]=a.useState(""),[Ne,ke]=a.useState(!1),[ve,H]=a.useState(!1),[Se,fe]=a.useState(null),[Y,re]=a.useState(null),[Pe,Z]=a.useState(M),[Te,ye]=a.useState(!1),[we,Me]=a.useState("credit"),[Oe,Ve]=a.useState(""),[R,ee]=a.useState(null),je=a.useCallback(()=>{q(new Date().toISOString().split("T")[0]),y(localStorage.getItem("pos_default_customer_id")||null),X(""),u([]),b(""),I(null),de(1),ie("R$"),xe(0),me(0),L([]),be(""),ge(""),ee(null),fe(null),re(null);const l=localStorage.getItem("pos_default_warranty_term");if(l)ae(l);else{const t=$.find(r=>r.name==="IPHONE SEMINOVO")||($.length>0?$[0]:null);t&&ae(t.name)}},[$]);a.useEffect(()=>{if(!_.current){if(x){q(x.date.split("T")[0]),y(x.customerId),X(x.salespersonId);const l=x.items.map(t=>{const r=T.find(o=>o.id===t.productId);return r?{...r,quantity:t.quantity,salePrice:t.unitPrice,discountType:"R$",discountValue:0}:null}).filter(t=>t!==null);u(l),ie("R$"),xe(x.discount),L(x.payments.map(t=>({...t}))),ae(x.warrantyTerm||""),be(x.observations||""),ge(x.internalObservations||"")}else je();_.current=!0}},[x,je,T]),a.useEffect(()=>{Z(M)},[M]);const E=a.useMemo(()=>c.reduce((l,t)=>l+(t.salePrice||0)*(t.quantity||0),0),[c]),U=a.useMemo(()=>c.reduce((l,t)=>{const r=t.discountType==="R$"?t.discountValue:(t.salePrice||0)*(t.quantity||0)*(t.discountValue/100);return l+r},0),[c]),se=a.useMemo(()=>ce==="%"?(E-U)*(te/100):te,[E,U,ce,te]),le=a.useMemo(()=>E-U-se+ue,[E,U,se,ue]),ne=a.useMemo(()=>z.reduce((l,t)=>l+t.value,0),[z]),J=a.useMemo(()=>le-ne,[le,ne]),Ce=a.useCallback(l=>{const t=!!(l.serialNumber||l.imei1),r=c.find(o=>o.id===l.id);if(t&&r){i("Este produto é único e já está no carrinho.","warning");return}I(l)},[c,i]),De=a.useCallback(()=>{if(!j)return;const l=j,t=!!(l.serialNumber||l.imei1),r=c.find(S=>S.id===l.id),o=t?1:K;if(o<=0)return;const d=(r?.quantity||0)+o;if(d>l.stock){i("Quantidade insuficiente em estoque.","warning");return}u(r?c.map(S=>S.id===l.id?{...S,quantity:d}:S):[...c,{...l,quantity:o,salePrice:l.price,discountType:"R$",discountValue:0}]),I(null),b(""),de(1)},[j,K,c,i]),oe=a.useCallback(l=>u(t=>t.filter(r=>r.id!==l)),[]),A=a.useCallback((l,t,r)=>{u(o=>o.map(d=>d.id===l?{...d,[t]:r}:d))},[]),s=a.useCallback(async()=>{if(!h){i("Selecione um cliente primeiro.","warning");return}const l=P.find(t=>t.id===h);if(!l){i("Cliente não encontrado.","error");return}console.log("[useSaleForm] handleOpenTradeInModal called for customer:",l.name);try{const t=await Qe(l);console.log("[useSaleForm] Supplier created/found:",t.id,t.name),Z(r=>r.some(o=>o.id===t.id)?r:[...r,t]),fe({origin:"Troca",supplierId:t.id}),H(!0)}catch(t){console.error("[useSaleForm] Error in handleOpenTradeInModal:",t),console.warn("[useSaleForm] Using fallback temporary supplier due to error.");const r={id:`temp-supplier-${l.id}`,name:l.name,email:l.email,phone:l.phone,linkedCustomerId:l.id};Z(o=>o.some(d=>d.id===r.id)?o:[...o,r]),fe({origin:"Troca",supplierId:r.id}),H(!0),t?.name!=="AbortError"&&!t?.message?.includes("aborted")&&i("Aviso: executando em modo offline para o fornecedor.","info")}},[h,P,i]),V=a.useCallback(l=>{const t=O.find(S=>S.name===l),r=l.toLowerCase(),o=r.includes("troca")||r.includes("entrada")||t?.name==="Aparelho na Troca",d=t?.type==="card"||r.includes("cartão")||r.includes("crédito")||r.includes("débito");if(!o&&J<=.01){i("Não há saldo pendente.","info");return}o?(console.log("[useSaleForm] handleRequestPayment: Opening trade-in modal"),s()):d?(t&&Ve(t.id),Me(r.includes("débito")||r.includes("debito")?"debit":"credit"),ye(!0)):ee({method:l,amount:parseFloat(J.toFixed(2))})},[J,O,s,i]),k=a.useCallback(()=>{if(!R||R.amount<=0){ee(null);return}const l=R.method==="Cartão"?R.cardType:R.method,t=O.find(o=>o.name===R.method),r={id:`pay-${Date.now()}`,method:l,value:R.amount,type:t?.type};L(o=>[...o,r]),ee(null)},[R,O]),p=a.useCallback(({payment:l,feeToAddToSale:t})=>{L(r=>[...r,l]),t>0&&me(r=>r+t),ye(!1)},[]),D=a.useCallback(l=>{L(t=>{const r=t.find(o=>o.id===l);return r&&((r.method==="Débito"||r.method==="Crédito")&&r.fees&&(r.type==="Débito"||r.type==="Com Juros")&&me(o=>Math.max(0,o-r.fees)),r.method==="Aparelho na Troca"&&(re(null),i("Troca removida.","info"))),t.filter(o=>o.id!==l)})},[i]),$e=a.useCallback(async l=>{if(!h){H(!1);return}const t=C.find(d=>d.id===n),r={...l,stock:1,selectedCustomerId:h,createdBy:n,createdByName:t?.name},o=r.costPrice||0;try{const d=await B(r);if(d){re(d);const S={id:`pay-trade-${Date.now()}`,method:"Aparelho na Troca",value:o,tradeInDetails:{productId:d.id,model:d.model,serialNumber:d.serialNumber,imei1:d.imei1,imei2:d.imei2,batteryHealth:d.batteryHealth}};L(Re=>[...Re,S]),i("Produto de troca adicionado!","success")}else i("Erro ao criar produto de troca.","error")}catch(d){i(d?.message||"Erro ao criar produto de troca.","error")}finally{H(!1)}},[h,n,C,B,i]),Fe=a.useCallback(async({tradeInValue:l,newProductData:t})=>{if(console.log("[useSaleForm] handleSaveTradeInFromModal called with:",{tradeInValue:l,newProductData:t}),!h){H(!1);return}const r=C.find(d=>d.id===n),o={...t,stock:1,selectedCustomerId:h,createdBy:n,createdByName:r?.name};try{const d=await B(o);if(d){re(d);const S={id:`pay-trade-${Date.now()}`,method:"Aparelho na Troca",value:l,tradeInDetails:{productId:d.id,model:d.model,serialNumber:d.serialNumber,imei1:d.imei1,imei2:d.imei2,batteryHealth:d.batteryHealth}};L(Re=>[...Re,S]),i("Produto de troca adicionado!","success")}else i("Erro ao criar produto de troca.","error")}catch(d){i(d?.message||"Erro ao criar produto de troca.","error")}finally{H(!1)}},[h,n,C,B,i]),He=a.useCallback(async(l="Finalizada")=>{const t=l==="Pendente";if(!h||!n||c.length===0){i("Preencha os campos obrigatórios (Cliente, Vendedor, Produtos) para salvar.","error");return}if(!t&&J>.01){i("Liquide o saldo para finalizar a venda.","error");return}const r={customerId:h,salespersonId:n,items:c.map(o=>({productId:o.id,quantity:o.quantity,unitPrice:o.salePrice})),subtotal:E,discount:U+se,total:le,payments:z,posTerminal:x?.posTerminal||"Caixa 1",status:t?"Pendente":x&&x.status!=="Pendente"?"Editada":"Finalizada",origin:x?.origin||(f?"PDV":"Balcão"),warrantyTerm:he,observations:pe,internalObservations:F,cashSessionId:x?.cashSessionId||f||void 0,cashSessionDisplayId:x?.cashSessionDisplayId||Q||void 0};try{console.log("useSaleForm: Attempting to save sale. saleToEdit ID:",x?.id);let o;if(x?o=await _e({...x,...r,status:r.status,oldStatus:x.status},v?.id,v?.name):o=await Je(r,v?.id,v?.name),console.log("useSaleForm: Sale saved successfully:",o.id),Y&&o){const d=C.find(S=>S.id===n);await We({...Y,observations:`Troca pela venda #${o.id}`},v?.id||d?.id,v?.name||d?.name),await Xe(Ke.STOCK_LAUNCH,Ye.PRODUCT,Y.id,`Produto vinculado à venda de origem #${o.id}. Usuário resp.: ${v?.name||d?.name||"Sistema"}`,v?.id||d?.id||"system",v?.name||d?.name||"Sistema")}t?i(`Venda #${o.id} salva como pendente.`,"warning"):i(`Venda #${o.id} finalizada com sucesso!`,"success"),G(o)}catch(o){console.error("useSaleForm: Error in handleSave:",o),i(o.message||"Erro ao salvar a venda.","error")}},[h,n,c,J,E,U,se,le,z,x,he,pe,F,f,Q,Y,C,G,i]);return{state:{saleDate:N,selectedCustomerId:h,selectedSalespersonId:n,cart:c,productSearch:m,productToConfirm:j,searchQuantity:K,globalDiscountType:ce,globalDiscountValue:te,cardFees:ue,payments:z,warrantyTerm:he,observations:pe,internalObservations:F,isCustomerModalOpen:Ne,isTradeInProductModalOpen:ve,productForTradeIn:Se,pendingTradeInProduct:Y,localSuppliers:Pe,isCardPaymentModalOpen:Te,cardTransactionType:we,cardMethodId:Oe,paymentInput:R,subtotal:E,totalItemDiscounts:U,globalDiscountAmount:se,total:le,totalPaid:ne,balance:J},actions:{setSaleDate:q,setSelectedCustomerId:y,setSelectedSalespersonId:X,setCart:u,setProductSearch:b,setProductToConfirm:I,setSearchQuantity:de,setGlobalDiscountType:ie,setGlobalDiscountValue:xe,setWarrantyTerm:ae,setObservations:be,setInternalObservations:ge,setIsCustomerModalOpen:ke,setIsCardPaymentModalOpen:ye,setIsTradeInProductModalOpen:H,setPaymentInput:ee,handleAddToCart:Ce,confirmAddToCart:De,handleRemoveFromCart:oe,handleCartItemUpdate:A,handleOpenTradeInModal:s,handleRequestPayment:V,handleConfirmPayment:k,handleConfirmCardPayment:p,handleRemovePayment:D,handleSaveTradeInProduct:$e,handleSaveTradeInFromModal:Fe,handleSave:He,resetState:je},refs:{productSearchRef:w}}},hs=(P,C)=>{const T=P.toLowerCase();return T.includes("pix")?e.jsx(Ze,{}):T.includes("dinheiro")||T.includes("espécie")?e.jsx(Ae,{}):C==="card"||T.includes("cartão")||T.includes("cre")?e.jsx(Ie,{}):e.jsx(Ae,{})},ps=P=>{const{customers:C,users:T,products:M,brands:$,categories:O,productModels:W,grades:B,gradeValues:G,receiptTerms:x,paymentMethods:f,onAddNewCustomer:Q}=P,{state:i,actions:v,refs:w}=ms(P),{saleDate:_,selectedCustomerId:N,selectedSalespersonId:q,cart:h,productSearch:y,productToConfirm:n,searchQuantity:X,globalDiscountType:c,globalDiscountValue:u,cardFees:m,payments:b,warrantyTerm:j,observations:I,internalObservations:K,isCustomerModalOpen:de,isTradeInProductModalOpen:ce,productForTradeIn:ie,localSuppliers:te,isCardPaymentModalOpen:xe,cardTransactionType:ue,cardMethodId:me,paymentInput:z,subtotal:L,totalItemDiscounts:he,globalDiscountAmount:ae,total:pe,totalPaid:be,balance:F}=i,{setSaleDate:ge,setSelectedCustomerId:Ne,setSelectedSalespersonId:ke,setProductSearch:ve,setSearchQuantity:H,setGlobalDiscountType:Se,setGlobalDiscountValue:fe,setWarrantyTerm:Y,setObservations:re,setInternalObservations:Pe,setIsCustomerModalOpen:Z,setIsCardPaymentModalOpen:Te,setIsTradeInProductModalOpen:ye,setPaymentInput:we,handleAddToCart:Me,confirmAddToCart:Oe,handleRemoveFromCart:Ve,handleCartItemUpdate:R,handleRequestPayment:ee,handleConfirmPayment:je,handleConfirmCardPayment:E,handleRemovePayment:U,handleSaveTradeInProduct:se,handleSaveTradeInFromModal:le,handleSave:ne}=v,{productSearchRef:J}=w,Ce=a.useMemo(()=>{if(!y)return[];const s=y.toLowerCase().trim(),V=new Set(h.map(k=>k.id));return M.filter(k=>{if(!!(k.serialNumber||k.imei1)&&V.has(k.id))return!1;const D=(k.model||"").toLowerCase().includes(s),$e=(k.imei1||"").toLowerCase().includes(s),Fe=(k.serialNumber||"").toLowerCase().includes(s);return(D||$e||Fe)&&k.stock>0})},[M,y,h]),De=a.useMemo(()=>{const s=[],V=f.filter(p=>p.active&&p.type==="card");return f.filter(p=>p.active&&p.type!=="card").forEach(p=>{const D=p.name.toLowerCase();D==="débito"||D==="debito"||D.includes("cartão débito")||D.includes("cartão de débito")||s.push({label:p.name,icon:hs(p.name,p.type)})}),V.length>0&&s.push({label:"Cartão",icon:e.jsx(Ie,{})}),s.find(p=>p.label==="Aparelho na Troca")||s.push({label:"Aparelho na Troca",icon:e.jsx(es,{})}),s},[f]),oe="w-full px-3 border rounded-lg bg-gray-50 border-gray-300 text-sm h-9 focus:ring-2 focus:ring-success/20 outline-none transition-all font-semibold",A="block text-[10px] font-black text-gray-600 mb-1 uppercase tracking-wider";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-100",children:e.jsxs("h3",{className:"flex items-center gap-2 font-bold text-gray-800 uppercase text-xs tracking-widest",children:[e.jsx(ss,{className:"h-4 w-4 text-success"})," Dados da venda"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:A,children:"Data"}),e.jsx("input",{type:"date",value:_,onChange:s=>ge(s.target.value),className:oe})]}),e.jsxs("div",{className:"md:col-span-7",children:[e.jsx("label",{className:A,children:"Cliente Selecionado*"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(ds,{options:C.map(s=>({value:s.id,label:s.name})),value:N,onChange:Ne,placeholder:"Busque pelo nome do cliente..."})}),e.jsx("button",{type:"button",onClick:()=>Z(!0),className:"px-3 bg-success-light text-success rounded-lg hover:bg-success hover:text-white transition-all h-9",children:e.jsx(ts,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:A,children:"Vendedor*"}),e.jsxs("select",{value:q,onChange:s=>ke(s.target.value),className:oe,disabled:!N,children:[e.jsx("option",{value:"",children:"Selecione..."}),T.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]})]}),e.jsxs("fieldset",{disabled:!N||!q,className:"space-y-4 disabled:opacity-50 transition-opacity",children:[e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"flex items-center gap-2 font-bold text-gray-800 uppercase text-xs tracking-widest",children:[e.jsx(as,{className:"h-4 w-4 text-success"})," Carrinho"]})}),e.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[e.jsxs("div",{className:"flex-grow relative",children:[e.jsx("label",{className:A,children:"Pesquisar Produto (Modelo, IMEI, SN)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:J,type:"text",value:y,onChange:s=>ve(s.target.value),placeholder:"Ex: iPhone 14 Pro...",className:`${oe} pl-9`}),e.jsx(rs,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none z-10"})]}),Ce.length>0&&e.jsx("div",{className:"absolute z-30 w-full bg-white border border-gray-200 rounded-xl mt-1 shadow-xl max-h-60 overflow-y-auto overflow-x-hidden",children:Ce.map(s=>e.jsxs("button",{onClick:()=>{Me(s),ve("")},className:"w-full p-2.5 hover:bg-success-light text-left transition-colors border-b last:border-0 border-gray-50 flex justify-between items-center group",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-sm group-hover:text-success transition-colors",children:s.model}),e.jsxs("p",{className:"text-[10px] text-muted",children:["SN: ",s.serialNumber," | IMEI: ",s.imei1," | Est: ",s.stock]})]}),e.jsx("span",{className:"font-bold text-primary text-xs",children:g(s.price)})]},s.id))})]}),e.jsxs("div",{className:"w-20",children:[e.jsx("label",{className:A,children:"Qtd."}),e.jsx("input",{type:"number",value:X,onChange:s=>H(Number(s.target.value)),min:"1",className:`${oe} text-center font-bold`})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-gray-50/30",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100/80 text-gray-500 font-bold uppercase text-[10px] tracking-tighter",children:e.jsxs("tr",{className:"text-left border-b border-gray-200",children:[e.jsx("th",{className:"px-4 py-3",children:"Item / Descrição"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Qtd."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Unitário"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Subtotal"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Ação"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-12 text-center text-muted italic",children:"Carrinho vazio. Adicione produtos acima."})}):h.map(s=>e.jsxs("tr",{className:"bg-white hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-black text-gray-900",children:s.model}),e.jsxs("div",{className:"text-[10px] text-muted flex flex-col gap-0.5 mt-1",children:[s.serialNumber&&e.jsxs("span",{children:["SN: ",e.jsx("span",{className:"font-mono text-gray-600",children:s.serialNumber})]}),s.imei1&&e.jsxs("span",{children:["IMEI 1: ",e.jsx("span",{className:"font-mono text-gray-600",children:s.imei1})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.condition&&e.jsxs("span",{children:["Condição: ",e.jsx("span",{className:"font-medium",children:s.condition})]}),s.batteryHealth!==void 0&&s.batteryHealth!==null&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsxs("span",{children:["Saúde Bat.: ",e.jsxs("span",{className:`${s.batteryHealth<80?"text-red-500 font-bold":"text-green-600 font-bold"}`,children:[s.batteryHealth,"%"]})]})]})]})]})]})}),e.jsx("td",{className:"px-4 py-3 text-center font-bold",children:s.quantity}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:g(s.salePrice)}),e.jsx("td",{className:"px-4 py-3 text-right font-black text-primary",children:g((s.salePrice||0)*(s.quantity||0))}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>Ve(s.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(ls,{className:"h-6 w-6"})})})]},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[e.jsxs("section",{className:"lg:col-span-2",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-bold text-gray-800 mb-2 pb-1 border-b border-gray-100 uppercase text-xs tracking-widest",children:[e.jsx(ns,{className:"h-4 w-4 text-success"})," Financeiro"]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[e.jsx("span",{className:"text-sm font-bold",children:"Subtotal"}),e.jsx("span",{className:"text-base font-bold text-gray-800",children:g(L)})]}),e.jsxs("div",{className:"flex justify-between items-center text-red-500 border-b border-gray-50 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold",children:"Desconto"}),e.jsxs("div",{className:"flex h-8",children:[e.jsxs("select",{value:c,onChange:s=>Se(s.target.value),className:"bg-gray-50 text-gray-700 text-xs px-2 rounded-l border border-gray-200 focus:ring-0 outline-none font-bold",children:[e.jsx("option",{children:"R$"}),e.jsx("option",{children:"%"})]}),e.jsx("input",{type:"number",value:u,onChange:s=>fe(Number(s.target.value)),className:"bg-gray-50 text-gray-700 w-20 text-xs px-2 rounded-r border border-l-0 border-gray-200 focus:ring-0 text-right font-bold outline-none"})]})]}),e.jsxs("span",{className:"text-base font-bold",children:["-",g(he+ae)]})]}),m>0&&e.jsxs("div",{className:"flex justify-between items-center text-blue-500",children:[e.jsx("span",{className:"text-sm font-bold",children:"Taxas"}),e.jsxs("span",{className:"text-base font-bold",children:["+",g(m)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 mt-1 border-t border-gray-100",children:[e.jsx("span",{className:"text-lg uppercase font-black tracking-widest text-success",children:"Total"}),e.jsx("span",{className:"text-3xl font-black text-gray-900",children:g(pe)})]})]})]}),e.jsxs("section",{className:"lg:col-span-3",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-bold text-gray-800 mb-2 pb-1 border-b border-gray-100 uppercase text-xs tracking-widest",children:[e.jsx(Ie,{className:"h-4 w-4 text-success"})," Pagamento"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1.5",children:De.map(({label:s,icon:V})=>e.jsxs("button",{type:"button",onClick:()=>ee(s),className:"flex-grow min-w-[90px] p-2 rounded-lg border border-gray-200 hover:border-success hover:bg-success-light transition-all flex flex-col items-center gap-1 group",children:[e.jsx("div",{className:"p-1 rounded bg-gray-50 group-hover:bg-white transition-colors",children:ze.cloneElement(V,{className:"h-4 w-4 text-gray-500 group-hover:text-success"})}),e.jsx("span",{className:"text-[10px] font-black uppercase text-gray-600 group-hover:text-success whitespace-nowrap",children:s})]},s))}),z&&e.jsxs("div",{className:"p-2 bg-success-light border border-success/30 rounded-lg flex items-end gap-2 animate-slide-down",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("label",{className:"text-[9px] font-bold text-success-dark mb-1 block",children:["Valor (",z.method,")"]}),e.jsx(Le,{value:z.amount,onChange:s=>we(V=>V?{...V,amount:s||0}:null),className:"h-8 text-sm border-success/50 bg-white"})]}),e.jsx("button",{onClick:je,className:"px-3 h-8 bg-success text-white rounded font-bold shadow-sm text-xs",children:"OK"}),e.jsx("button",{onClick:()=>we(null),className:"px-3 h-8 bg-white text-gray-500 rounded font-bold border border-gray-200 text-xs",children:"X"})]}),e.jsx("div",{className:"rounded-lg border border-gray-100 overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-left font-bold text-muted uppercase text-[9px]",children:[e.jsx("th",{className:"px-3 py-1.5",children:"Método"}),e.jsx("th",{className:"px-3 py-1.5 text-right",children:"Valor"}),e.jsx("th",{className:"px-3 py-1.5 text-center"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-50",children:[b.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-3 py-1.5",children:[e.jsx("div",{className:"font-bold text-gray-700",children:s.card||s.method}),s.installments&&s.installments>0&&e.jsxs("div",{className:"text-[10px] text-gray-500 font-medium mt-0.5",children:[e.jsxs("span",{children:[s.installments,"x de ",g(s.installmentsValue||s.value/s.installments)]}),s.fees&&s.fees>0&&e.jsxs("span",{className:"ml-2",children:["• Taxa: ",g(s.fees)," (",s.feePercentage?.toFixed(2),"%)"]})]}),s.tradeInDetails&&e.jsxs("div",{className:"mt-1 p-1 bg-blue-50/50 rounded border border-blue-100/50",children:[e.jsx("span",{className:"block font-bold text-gray-800 text-[11px] mb-0.5",children:s.tradeInDetails.model}),e.jsxs("span",{className:"block text-[10px] text-gray-600 font-medium",children:[s.tradeInDetails.imei1?`IMEI: ${s.tradeInDetails.imei1}`:`S/N: ${s.tradeInDetails.serialNumber}`,s.tradeInDetails.batteryHealth?` | Bat: ${s.tradeInDetails.batteryHealth}%`:""]})]})]}),e.jsx("td",{className:"px-3 py-1.5 text-right font-bold text-gray-900",children:g(s.value)}),e.jsx("td",{className:"px-3 py-1.5 text-center",children:e.jsx("button",{onClick:()=>U(s.id),className:"text-red-400 hover:text-red-600",children:e.jsx(os,{className:"h-3 w-3"})})})]},s.id)),b.length>0&&e.jsxs("tr",{className:"bg-success-light/30",children:[e.jsx("td",{className:"px-3 py-1.5 font-bold uppercase text-[9px] text-success",children:"Pago"}),e.jsx("td",{className:"px-3 py-1.5 text-right font-black text-success",children:g(be)}),e.jsx("td",{})]})]})]})}),e.jsxs("div",{className:`p-2 rounded-lg flex items-center justify-between font-bold uppercase tracking-widest text-[10px] border ${Math.abs(F)<.01?"bg-success text-white border-transparent":"bg-orange-50 text-orange-700 border-orange-200"}`,children:[e.jsx("span",{children:Math.abs(F)<.01?"Pago":"Pendente"}),e.jsx("span",{children:g(Math.abs(F))})]})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 p-4 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:A,children:"Garantia"}),e.jsx("select",{value:j,onChange:s=>Y(s.target.value),className:"p-2.5 border rounded-lg bg-white border-gray-300 text-sm font-bold outline-none focus:ring-2 focus:ring-success/20 h-10 min-w-[320px]",children:x.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))})]}),e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx("label",{className:A,children:"Obs. Comprovante"}),e.jsx("input",{value:I,onChange:s=>re(s.target.value),className:"p-2 border rounded-lg bg-white border-gray-300 text-sm font-medium w-full outline-none focus:ring-2 focus:ring-success/20 h-10",placeholder:"Ex: Garantia estendida..."})]}),e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx("label",{className:A,children:"Obs. Internas"}),e.jsx("input",{value:K,onChange:s=>Pe(s.target.value),className:"p-2 border rounded-lg bg-white border-gray-300 text-sm font-medium w-full outline-none focus:ring-2 focus:ring-success/20 h-10",placeholder:"Ex: Cliente exigente..."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:P.onCancel,className:"flex-1 max-w-[150px] h-11 bg-red-100 text-red-600 rounded-lg font-bold uppercase text-[10px] tracking-widest hover:bg-red-200 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:()=>ne("Pendente"),disabled:h.length===0,className:"flex-1 max-w-[150px] h-11 bg-orange-100 text-orange-600 rounded-lg font-bold uppercase text-[10px] tracking-widest hover:bg-orange-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Pendente"}),e.jsx("button",{onClick:()=>ne("Finalizada"),disabled:h.length===0||F>.01,className:"flex-1 max-w-[200px] h-11 bg-success text-white rounded-lg font-black uppercase text-xs tracking-widest shadow-lg shadow-success/20 hover:bg-success/90 transition-all disabled:bg-gray-300 disabled:shadow-none",children:"Finalizar Venda"})]})]})]}),de&&e.jsx(cs,{entity:null,initialType:"Cliente",onClose:()=>Z(!1),onSave:async(s,V,k)=>{const p={name:s.name,email:s.email,phone:s.phone,address:s.address,avatarUrl:s.avatarUrl};k==="Pessoa Física"&&(p.cpf=s.cpf,p.rg=s.rg,p.birthDate=s.birthDate);const D=await Q(p);D&&Ne(D.id),Z(!1)}}),e.jsx(is,{product:ie,isOpen:ce,isTradeInMode:!0,suppliers:te,brands:$,categories:O,productModels:W,grades:B,gradeValues:G,customers:C,onClose:()=>ye(!1),onSave:se,onAddNewSupplier:async()=>null}),e.jsx(us,{isOpen:xe,onClose:()=>Te(!1),onConfirm:E,amountDue:F>0?F:0,initialTransactionType:ue,initialMethodId:me}),n&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-100 p-4",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(qe,{className:"h-6 w-6 text-primary"}),"Confirmar Produto"]})}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-muted uppercase tracking-wider",children:"Produto / Modelo"}),e.jsx("p",{className:"text-base font-bold text-gray-900 leading-tight",children:n.model}),n.origin==="Troca"&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-[9px] font-bold rounded-full bg-blue-100 text-blue-700 uppercase",children:"Aparelho de Troca"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[n.imei1&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase",children:"IMEI 1"}),e.jsx("span",{className:"font-mono font-medium text-gray-700",children:n.imei1})]}),n.imei2&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase",children:"IMEI 2"}),e.jsx("span",{className:"font-mono font-medium text-gray-700",children:n.imei2})]}),n.serialNumber&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase",children:"Nº de Série"}),e.jsx("span",{className:"font-mono font-medium text-gray-700",children:n.serialNumber})]}),n.batteryHealth!==void 0&&n.batteryHealth!==null&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase",children:"Saúde Bateria"}),e.jsxs("span",{className:`font-bold ${n.batteryHealth<80?"text-red-500":"text-green-600"}`,children:[n.batteryHealth,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase mb-0.5",children:"Preço"}),e.jsx("span",{className:"font-black text-sm text-primary",children:g(n.price)})]}),e.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase mb-0.5",children:"Condição"}),e.jsx("span",{className:`text-[10px] font-bold ${n.condition==="Novo"?"text-green-600":"text-blue-600"}`,children:n.condition})]}),e.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase mb-0.5",children:"Estoque"}),e.jsx("span",{className:"font-bold text-sm text-gray-700",children:n.stock})]}),e.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsx("span",{className:"block text-[9px] font-bold text-muted uppercase mb-0.5",children:"Garantia"}),e.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:n.warranty||"-"})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>v.setProductToConfirm(null),className:"flex-1 py-2.5 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 transition-colors text-sm",children:"CANCELAR"}),e.jsx("button",{onClick:Oe,className:"flex-1 py-2.5 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all transform active:scale-95 text-sm",children:"CONFIRMAR"})]})})]})]})})]})},vs=ze.memo(ps);export{vs as N};
