import{j as e,S as W,b as Z,g as H,a as J,k as ee,f as w}from"./index-BMA--0RW.js";import{j as te,r as o}from"./react-vendor-Bv8thS0I.js";import{R as E,B as A,C as $,X as O,Y,T as F,L as U,a as B,P as se,c as ae,b as re,d as G}from"./charts-D-FiJo9K.js";import"./supabase-C1Qlw3jS.js";const L=({title:i,value:u,className:h})=>e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${h||"bg-surface border-border"}`,children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:u})]}),q=({active:i,payload:u,label:h})=>i&&u&&u.length?e.jsxs("div",{className:"bg-white p-4 border border-gray-100 rounded-xl shadow-xl min-w-[200px]",children:[e.jsx("p",{className:"font-bold text-gray-800 mb-2 border-b pb-1",children:h}),u.map((d,b)=>e.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",style:{color:d.color},children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:d.color}}),d.name,":"]}),e.jsx("span",{className:"text-sm font-bold text-gray-700",children:d.name==="Vendas"||d.name==="Quantidade"?d.value:w(d.value)})]},b))]}):null,f={primary:"#3b82f6",success:"#10b981",purple:"#8b5cf6",orange:"#f97316",pink:"#ec4899",cyan:"#06b6d4",slate:"#64748b"},X=[f.primary,f.success,f.orange,f.purple,f.pink,f.cyan,f.slate],le=({sales:i,products:u,customers:h,users:d})=>{const[b,D]=o.useState(()=>{const a=new Date;return a.setDate(a.getDate()-30),a.toISOString().split("T")[0]}),[P,S]=o.useState(new Date().toISOString().split("T")[0]),[y,v]=o.useState("todos"),z=o.useMemo(()=>d.reduce((a,s)=>({...a,[s.id]:s.name}),{}),[d]),p=o.useMemo(()=>h.reduce((a,s)=>({...a,[s.id]:s.name}),{}),[h]),j=o.useMemo(()=>u.reduce((a,s)=>(a[s.id]=s,a),{}),[u]),c=o.useMemo(()=>i.filter(a=>{const s=new Date(a.date),[r,n,C]=b.split("-").map(Number),N=new Date(r,n-1,C,0,0,0,0),[g,I,T]=P.split("-").map(Number),K=new Date(g,I-1,T,23,59,59,999),V=s>=N&&s<=K,Q=y==="todos"||a.salespersonId===y,_=a.status!=="Cancelada";return V&&Q&&_}),[i,b,P,y]),{totalSales:M,totalProfit:x,salesCount:k,avgTicket:R}=o.useMemo(()=>{let a=0,s=0,r=0;c.forEach(g=>{a+=g.total,s+=g.subtotal-g.discount;const I=g.items.reduce((T,K)=>{const V=j[K.productId],Q=(V?.costPrice||0)+(V?.additionalCostPrice||0);return T+Q*K.quantity},0);r+=I});const n=c.length,C=s-r,N=n>0?a/n:0;return{totalSales:a,totalProfit:C,salesCount:n,avgTicket:N}},[c,j]),t=o.useMemo(()=>{const a=c.reduce((s,r)=>{const n=new Date(r.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"});s[n]||(s[n]={faturamento:0,lucro:0,vendas:0});const C=r.items.reduce((g,I)=>{const T=j[I.productId];return g+((T?.costPrice||0)+(T?.additionalCostPrice||0))*I.quantity},0),N=r.subtotal-r.discount;return s[n].faturamento+=r.total,s[n].lucro+=N-C,s[n].vendas+=1,s},{});return Object.entries(a).map(([s,r])=>({name:s,...r})).sort((s,r)=>{const[n,C]=s.name.split("/"),[N,g]=r.name.split("/");return new Date(`${new Date().getFullYear()}-${C}-${n}`).getTime()-new Date(`${new Date().getFullYear()}-${g}-${N}`).getTime()})},[c,j]),l=o.useMemo(()=>{const a=c.flatMap(s=>s.payments).reduce((s,r)=>{const n=r.method;return s[n]||(s[n]=0),s[n]+=r.value,s},{});return Object.entries(a).map(([s,r])=>({name:s,value:r})).sort((s,r)=>r.value-s.value)},[c]),m=o.useMemo(()=>{const a=c.flatMap(s=>s.items).reduce((s,r)=>(s[r.productId]||(s[r.productId]={name:j[r.productId]?.model||"Desconhecido",revenue:0}),s[r.productId].revenue+=r.quantity*r.unitPrice,s),{});return Object.values(a).sort((s,r)=>r.revenue-s.revenue).slice(0,10)},[c,j]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border flex flex-wrap items-end gap-4 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted mb-1 block",children:"Data Inicial"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",value:b,onChange:a=>D(a.target.value),className:"p-2 pl-3 border rounded-md bg-white border-gray-200 h-10 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-shadow w-40"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted mb-1 block",children:"Data Final"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",value:P,onChange:a=>S(a.target.value),className:"p-2 pl-3 border rounded-md bg-white border-gray-200 h-10 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-shadow w-40"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted mb-1 block",children:"Vendedor"}),e.jsxs("select",{value:y,onChange:a=>v(a.target.value),className:"p-2 border rounded-md bg-white border-gray-200 h-10 w-48 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-shadow",children:[e.jsx("option",{value:"todos",children:"Todos os vendedores"}),d.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(L,{title:"Faturamento Total",value:w(M),className:"bg-blue-50 border-blue-100"}),e.jsx(L,{title:"Lucro Líquido",value:w(x),className:x>=0?"bg-emerald-50 border-emerald-100":"bg-red-50 border-red-100"}),e.jsx(L,{title:"Vendas Realizadas",value:k.toString(),className:"bg-purple-50 border-purple-100"}),e.jsx(L,{title:"Ticket Médio",value:w(R),className:"bg-orange-50 border-orange-100"})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg mb-6 text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-primary rounded-full"}),"Evolução Diária"]}),e.jsx(E,{width:"100%",height:350,children:e.jsxs(A,{data:t,margin:{top:10,right:10,left:10,bottom:0},barGap:0,children:[e.jsx($,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(O,{dataKey:"name",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1,dy:10}),e.jsx(Y,{tickFormatter:a=>new Intl.NumberFormat("pt-BR",{notation:"compact",compactDisplay:"short"}).format(a),tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),e.jsx(F,{content:e.jsx(q,{}),cursor:{fill:"#f8fafc"}}),e.jsx(U,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),e.jsx(B,{dataKey:"faturamento",fill:f.primary,name:"Faturamento",radius:[4,4,0,0],maxBarSize:50}),e.jsx(B,{dataKey:"lucro",fill:f.success,name:"Lucro",radius:[4,4,0,0],maxBarSize:50})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-border shadow-sm flex flex-col",children:[e.jsxs("h3",{className:"font-bold text-lg mb-6 text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full"}),"Formas de Pagamento"]}),e.jsx("div",{className:"flex-1 w-full min-h-[300px]",children:e.jsx(E,{width:"100%",height:"100%",children:e.jsxs(se,{children:[e.jsx(ae,{data:l,cx:"50%",cy:"50%",innerRadius:80,outerRadius:110,paddingAngle:3,dataKey:"value",nameKey:"name",children:l.map((a,s)=>e.jsx(re,{fill:X[s%X.length],strokeWidth:0},`cell-${s}`))}),e.jsx(F,{content:e.jsx(q,{})}),e.jsx(U,{layout:"vertical",verticalAlign:"middle",align:"right",iconType:"circle",formatter:(a,s)=>e.jsx("span",{className:"text-sm font-medium text-gray-600 ml-1",children:a})})]})})})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-border shadow-sm flex flex-col",children:[e.jsxs("h3",{className:"font-bold text-lg mb-6 text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-orange-500 rounded-full"}),"Top 10 Produtos"]}),e.jsx("div",{className:"flex-1 w-full min-h-[300px]",children:e.jsx(E,{width:"100%",height:"100%",children:e.jsxs(A,{data:m,layout:"vertical",margin:{top:5,right:30,left:10,bottom:5},barSize:20,children:[e.jsx($,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f0f0f0"}),e.jsx(O,{type:"number",hide:!0}),e.jsx(Y,{type:"category",dataKey:"name",width:140,tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),e.jsx(F,{content:e.jsx(q,{}),cursor:{fill:"transparent"}}),e.jsx(B,{dataKey:"revenue",fill:f.purple,name:"Faturamento",radius:[0,4,4,0],background:{fill:"#f8fafc"}})]})})})]})]}),e.jsxs("div",{className:"bg-surface rounded-lg border border-border p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary mb-4",children:"Relatório Detalhado de Vendas"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-muted",children:[e.jsx("thead",{className:"text-xs text-secondary uppercase bg-surface-secondary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"ID Venda"}),e.jsx("th",{className:"px-4 py-3",children:"Data"}),e.jsx("th",{className:"px-4 py-3",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3",children:"Vendedor"}),e.jsx("th",{className:"px-4 py-3",children:"Itens"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Lucro"})]})}),e.jsx("tbody",{children:c.map(a=>{const s=a.items.reduce((C,N)=>{const g=j[N.productId];return C+((g?.costPrice||0)+(g?.additionalCostPrice||0))*N.quantity},0),n=a.subtotal-a.discount-s;return e.jsxs("tr",{className:"bg-surface border-b border-border hover:bg-surface-secondary",children:[e.jsxs("td",{className:"px-4 py-3 font-medium text-primary",children:["#",a.id]}),e.jsx("td",{className:"px-4 py-3",children:new Date(a.date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-4 py-3",children:p[a.customerId]||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:z[a.salespersonId]||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:a.items.length}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-primary",children:w(a.total)}),e.jsx("td",{className:`px-4 py-3 text-right font-semibold ${n>=0?"text-success":"text-danger"}`,children:w(n)})]},a.id)})})]})})]})]})},oe=({products:i,sales:u,initialFilter:h})=>{const[d,b]=o.useState("todos"),[D,P]=o.useState(""),[S,y]=o.useState(1),[v,z]=o.useState(10);o.useEffect(()=>{h==="low_stock"&&b("baixo")},[h]),o.useEffect(()=>{y(1)},[d,D,v]);const p=o.useMemo(()=>i.filter(t=>{const l=t.model.toLowerCase().includes(D.toLowerCase());let m=!0;switch(d){case"baixo":m=t.minimumStock!=null&&t.stock>0&&t.stock<=t.minimumStock;break;case"zerado":m=t.stock<=0;break;case"todos":default:m=!0}return l&&m}),[i,d,D]),j=o.useMemo(()=>{const t=(S-1)*v;return p.slice(t,t+v)},[p,S,v]),c=Math.ceil(p.length/v),M=o.useMemo(()=>({totalItems:p.reduce((t,l)=>t+l.stock,0),totalCost:p.reduce((t,l)=>t+((l.costPrice||0)+(l.additionalCostPrice||0))*l.stock,0),totalSaleValue:p.reduce((t,l)=>t+l.price*l.stock,0)}),[p]),x=o.useMemo(()=>{const t={};return u.forEach(l=>{l.status!=="Cancelada"&&l.items.forEach(m=>{t[m.productId]=(t[m.productId]||0)+m.quantity})}),Object.entries(t).map(([l,m])=>({name:i.find(s=>s.id===l)?.model||"Desconhecido",value:m})).sort((l,m)=>m.value-l.value).slice(0,10)},[u,i]),k=o.useMemo(()=>i.map(t=>{const l=(t.costPrice||0)+(t.additionalCostPrice||0),m=t.price>0?(t.price-l)/t.price*100:0;return{name:t.model,value:m}}).sort((t,l)=>l.value-t.value).slice(0,10),[i]),R=t=>t.stock<=0?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-200 text-gray-800",children:"Zerado"}):t.minimumStock!=null&&t.stock<=t.minimumStock?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Baixo"}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"OK"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border flex flex-col md:flex-row md:items-center justify-between gap-4 shadow-sm",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",placeholder:"Buscar produto...",value:D,onChange:t=>P(t.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg bg-white border-gray-200 focus:ring-2 focus:ring-primary/20 outline-none"})]}),e.jsx("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg",children:["todos","baixo","zerado"].map(t=>e.jsx("button",{onClick:()=>b(t),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${d===t?"bg-white text-primary shadow-sm":"text-gray-500 hover:text-gray-900"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(L,{title:"Total de Itens em Estoque",value:M.totalItems.toLocaleString("pt-BR"),className:"bg-blue-50 border-blue-100"}),e.jsx(L,{title:"Valor de Custo do Estoque",value:w(M.totalCost),className:"bg-orange-50 border-orange-100"}),e.jsx(L,{title:"Valor de Venda do Estoque",value:w(M.totalSaleValue),className:"bg-emerald-50 border-emerald-100"})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Inventário Detalhado"}),e.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:p.length})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Exibir:"}),e.jsxs("select",{value:v,onChange:t=>z(Number(t.target.value)),className:"border border-gray-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-primary/20 outline-none",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Estoque Atual"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Mínimo"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Custo Total"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Venda Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:j.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:t.model}),e.jsx("td",{className:"px-4 py-3 text-center font-bold text-lg text-gray-700",children:t.stock}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-500",children:t.minimumStock||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:R(t)}),e.jsx("td",{className:"px-4 py-3 text-right",children:w(((t.costPrice||0)+(t.additionalCostPrice||0))*t.stock)}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-primary",children:w(t.price*t.stock)})]},t.id))})]}),p.length===0&&e.jsx("div",{className:"text-center py-10 text-gray-400",children:"Nenhum produto encontrado com os filtros atuais."})]}),c>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 border-t pt-4",children:[e.jsxs("span",{className:"text-sm text-muted",children:["Página ",S," de ",c]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(t=>Math.max(1,t-1)),disabled:S===1,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("button",{onClick:()=>y(t=>Math.min(c,t+1)),disabled:S===c,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Próxima"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-border shadow-sm flex flex-col",children:[e.jsxs("h3",{className:"font-bold text-lg mb-6 text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-indigo-500 rounded-full"}),"Produtos Mais Vendidos (Qtd)"]}),e.jsx("div",{className:"flex-1 w-full min-h-[300px]",children:e.jsx(E,{width:"100%",height:300,children:e.jsxs(A,{data:x,layout:"vertical",margin:{top:5,right:40,left:10,bottom:5},barSize:20,children:[e.jsx($,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f0f0f0"}),e.jsx(O,{type:"number",hide:!0}),e.jsx(Y,{type:"category",dataKey:"name",width:140,tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),e.jsx(F,{content:e.jsx(q,{}),cursor:{fill:"transparent"}}),e.jsx(B,{dataKey:"value",fill:f.purple,name:"Quantidade",radius:[0,4,4,0],background:{fill:"#f8fafc"},children:e.jsx(G,{dataKey:"value",position:"right",fontSize:11,fill:"#64748b"})})]})})})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-border shadow-sm flex flex-col",children:[e.jsxs("h3",{className:"font-bold text-lg mb-6 text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-teal-500 rounded-full"}),"Maiores Margens de Lucro (%)"]}),e.jsx("div",{className:"flex-1 w-full min-h-[300px]",children:e.jsx(E,{width:"100%",height:300,children:e.jsxs(A,{data:k,layout:"vertical",margin:{top:5,right:45,left:10,bottom:5},barSize:20,children:[e.jsx($,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f0f0f0"}),e.jsx(O,{type:"number",hide:!0}),e.jsx(Y,{type:"category",dataKey:"name",width:140,tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),e.jsx(F,{content:({active:t,payload:l,label:m})=>t&&l&&l.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-100 rounded-xl shadow-xl",children:[e.jsx("p",{className:"font-bold text-gray-800 border-b pb-1 mb-1",children:m}),e.jsxs("p",{className:"text-sm text-teal-600 font-semibold",children:["Margem: ",l[0].value.toFixed(1),"%"]})]}):null,cursor:{fill:"transparent"}}),e.jsx(B,{dataKey:"value",fill:f.success,name:"Margem (%)",radius:[0,4,4,0],background:{fill:"#f8fafc"},children:e.jsx(G,{dataKey:"value",position:"right",formatter:t=>`${t.toFixed(1)}%`,fontSize:11,fill:"#64748b"})})]})})})]})]})]})},me=()=>{const[i,u]=te(),[h,d]=o.useState(i.get("tab")||"vendas"),[b,D]=o.useState([]),[P,S]=o.useState([]),[y,v]=o.useState([]),[z,p]=o.useState([]),[j,c]=o.useState(!0),M=[{id:"estoque",label:"Estoque"},{id:"vendas",label:"Vendas"}];return o.useEffect(()=>{const x=i.get("tab");x&&M.some(k=>k.id===x)&&d(x)},[i]),o.useEffect(()=>{(async()=>{c(!0);try{const[k,R,t,l]=await Promise.all([Z(),H(),J(),ee()]);D(k),S(R),v(t),p(l)}catch(k){console.error("Failed to fetch report data:",k)}finally{c(!1)}})()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Relatórios"}),e.jsx("div",{className:"inline-flex items-center gap-1 bg-surface-secondary p-1 rounded-lg",children:M.map(x=>e.jsx("button",{onClick:()=>{d(x.id),u({tab:x.id})},className:`px-3 py-1.5 rounded-md text-sm font-medium whitespace-nowrap transition-colors ${h===x.id?"bg-primary text-white shadow-sm":"text-muted hover:text-primary"}`,children:x.label},x.id))}),j?e.jsx("div",{className:"flex justify-center items-center h-full py-10",children:e.jsx(W,{})}):e.jsxs(e.Fragment,{children:[h==="vendas"&&e.jsx(le,{sales:b,products:P,customers:y,users:z}),h==="estoque"&&e.jsx(oe,{products:P,sales:b,initialFilter:i.get("filter")})]})]})};export{me as default};
